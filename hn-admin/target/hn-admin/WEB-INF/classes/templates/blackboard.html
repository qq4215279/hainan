<body xmlns:th="http://www.thymeleaf.org">
<css>
    <div  th:include="fragment/fargment :: bootstrapTableCss"></div>
    <link th:href="@{/static/assets/css/paper-dashboard.css}" rel="stylesheet"/>
    <link th:href="@{/static/css/iconfont.css}" rel="stylesheet">
    <link th:href="@{/static/css/layui.css}" rel="stylesheet">

    <style type="text/css">
    .print{
        float:left;
        width:75px;
        height:30px;
        border-radius: 5px;
        background: #1E90FF;
        color: white !important;
        font-size: 16px;
        cursor: pointer;
        text-align:center;
        line-height:30px
    }

    .print:hover{
        color:red
    }

        table tr td,th{

            color:#000;
        }
    </style>
</css>
<input type="hidden" id="eType"/>
<div class="row">
    <div class="col-sm-12"></div>
    <div class="content">
        <div class="">

        </div>
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-4">
                    <div class="card ">
                        <div class="header">
                            <span class="title" style="float: left">工会会员人数统计</span>
                            <p class="category"></p>
                        </div>
                        <div class="content">
                            <div id="img_box"></div>
                            <div id="memberStatistics" class="ct-chart"></div>
                        </div>
                    </div>
                </div>
                <div class="col-md-8">
                    <div class="card ">
                        <div class="header">
                            <h4 class="title">近一年各月注册和入会人员统计</h4>
                            <p class="category"></p>
                        </div>
                        <div class="content">
                            <div id="lastYearMonthStatistics" class="ct-chart"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="card ">
                        <div class="header">
                            <h4 class="title">会员总量排名前十工会统计</h4>
                            <p class="category"></p>
                        </div>
                        <div class="content">
                            <div id="top10Statistics" class="ct-chart"></div>
                        </div>
                    </div>
                </div>
            </div>


            <div class="row">
                <div class="col-md-12">
                    <div class="card ">
                        <div class="header">
                            <h4 class="title">省总工会直属前十</h4>
                            <p class="category"></p>
                        </div>
                        <div class="content">
                            <div id="provincialUnionsTop10" class="ct-chart"></div>
                        </div>
                        <span class="title print" onclick="showOrHide()" style="margin-left:10px;margin-top:-35px;">更多</span>
                        <!--<button onclick="showOrHide()" type="button" style="float:right;">更多</button>-->
                    </div>
                </div>
            </div>

            <div class="row" id="div1" style="display: none;">
                <div class="col-md-12">
                    <div class="card ">
                        <div class="header">
                            <h4 class="title">省总工会直属更多</h4>
                            <p class="category"></p>
                        </div>
                        <div class="content">
                            <div id="provincialUnionsMore" class="ct-chart"></div>
                        </div>
                    </div>
                </div>
            </div>




            <div class="row">
                <div class="col-md-12">
                    <div class="card ">
                        <div class="header">
                            <h4 class="title">基层企业工会排名前十工会统计</h4>
                            <p class="category"></p>
                        </div>
                        <div class="content">
                            <div id="grassrootsEnterprisesTop10" class="ct-chart"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!--<div class="row">-->
                <!--<div class="col-md-12">-->
                    <!--<h4 class="title">新增组织数排行统计</h4>-->
                    <!--&lt;!&ndash;<div class="card ">&ndash;&gt;-->
                        <!--&lt;!&ndash;<div class="header">&ndash;&gt;-->
                            <!--&lt;!&ndash;<p class="category"></p>&ndash;&gt;-->
                        <!--&lt;!&ndash;</div>&ndash;&gt;-->
                        <!--&lt;!&ndash;<div class="content">&ndash;&gt;-->
                            <!--&lt;!&ndash;<div id="organizationalRank" class="ct-chart"></div>&ndash;&gt;-->
                        <!--&lt;!&ndash;</div>&ndash;&gt;-->
                    <!--&lt;!&ndash;</div>&ndash;&gt;-->
                    <!--<table id="demoSearchTable" data-mobile-responsive="true" data-click-to-select="true"></table>-->
                <!--</div>-->
            <!--</div>-->


            <!--<div class="row">-->
                <!--<div class="col-md-12">-->
                    <!--<h4 class="title">每月组织数排行统计</h4>-->
                    <!--&lt;!&ndash;<div class="card ">&ndash;&gt;-->
                    <!--&lt;!&ndash;<div class="header">&ndash;&gt;-->
                    <!--&lt;!&ndash;<p class="category"></p>&ndash;&gt;-->
                    <!--&lt;!&ndash;</div>&ndash;&gt;-->
                    <!--&lt;!&ndash;<div class="content">&ndash;&gt;-->
                    <!--&lt;!&ndash;<div id="organizationalRank" class="ct-chart"></div>&ndash;&gt;-->
                    <!--&lt;!&ndash;</div>&ndash;&gt;-->
                    <!--&lt;!&ndash;</div>&ndash;&gt;-->
                    <!--<table id="demoSearchTable2" data-mobile-responsive="true" data-click-to-select="true"></table>-->
                <!--</div>-->
            <!--</div>-->




            <div class="row">
                <div class="col-md-12">
                    <div class="card ">
                        <div class="header">
                            <h4 class="title">近一年各月会员统计</h4>
                            <p class="category"></p>
                        </div>
                        <div class="content">
                            <div id="memmberRank" class="ct-chart"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row" style="windth:450px">
                <div class="col-md-12">
                    <div class="card ">
                        <div class="header">
                            <h4 class="title">近一个月入会人数排名前五工会统计</h4>
                            <p class="category"></p>
                        </div>
                        <div class="content">
                            <div id="joinOrganizationTop5" class="ct-chart"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row" >
                <div class="col-md-12">
                    <div class="card ">
                        <div class="header">
                            <h4 class="title">会员民族分布统计</h4>
                            <p class="category"></p>
                        </div>
                        <div class="content">
                            <div id="memberInfo1" style="height: 800px;" class="ct-chart"></div>
                        </div>
                    </div>
                </div>
            </div>
            <!--<div class="row" >-->
                <!--<div class="col-md-12">-->
                    <!--<div class="card ">-->
                        <!--<div class="header">-->
                            <!--<h4 class="title">会员年龄分布统计</h4>-->
                            <!--<p class="category"></p>-->
                        <!--</div>-->
                        <!--<div class="content">-->
                            <!--<div id="memberInfo2" class="ct-chart"></div>-->
                        <!--</div>-->
                    <!--</div>-->
                <!--</div>-->
            <!--</div>-->
            <!--<div class="row" >-->
                <!--<div class="col-md-12">-->
                    <!--<div class="card ">-->
                        <!--<div class="header">-->
                            <!--<h4 class="title">会员学历分布统计</h4>-->
                            <!--<p class="category"></p>-->
                        <!--</div>-->
                        <!--<div class="content">-->
                            <!--<div id="memberInfo3" class="ct-chart"></div>-->
                        <!--</div>-->
                    <!--</div>-->
                <!--</div>-->
            <!--</div>-->
            <div class="row" >
                <div class="col-md-12">
                    <div class="card ">
                        <div class="header">
                            <h4 class="title">农民工职工比例统计</h4>
                            <p class="category"></p>
                        </div>
                        <div class="content">
                            <div id="memberInfo5" class="ct-chart"></div>
                        </div>
                    </div>
                </div>
            </div>
            <!--<div class="row" >-->
                <!--<div class="col-md-12">-->
                    <!--<div class="card ">-->
                        <!--<div class="header">-->
                            <!--<h4 class="title">会员户籍分布统计</h4>-->
                            <!--<p class="category"></p>-->
                        <!--</div>-->
                        <!--<div class="content">-->
                            <!--<div id="memberInfo4" style="height: 900px" class="ct-chart"></div>-->
                        <!--</div>-->
                    <!--</div>-->
                <!--</div>-->
            <!--</div>-->
            <div class="row" >
                <div class="col-md-12">
                    <div class="card ">
                        <div class="header">
                            <h4 class="title">1/15-至今 农业户口的会员入会情况</h4>
                            <p class="category"></p>
                        </div>
                        <div class="content">
                            <div class="fixed-table-container" id="memberFarmerInfo">

                                <div class="fixed-table-header" style="overflow: auto;">
                                    <table class="table table-hover table-striped">
                                        <tr t1><td>日期</td></tr>
                                        <tr t2><td>非农业户口</td></tr>
                                        <tr t3><td>农业户口</td></tr>
                                    </table>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="layui-form" th:if="${roldetype == '1'}">
    <div class="layui-form-item" pane="">
        <label class="layui-form-label" style="width:200px">请选择需要下载的统计：</label>
        <div class="layui-input-block" style="margin-left: 200px !important;">
            <input type="checkbox" name="echart" lay-skin="primary" value="1" title="工会人员统计">
            <input type="checkbox" name="echart" lay-skin="primary" value="2" title="注册和入会人员统计">
            <input type="checkbox" name="echart" lay-skin="primary" value="3" title="会员总量排名前十统计">
            <input type="checkbox" name="echart" lay-skin="primary" value="4" title="省总工会直属前十统计">
            <input type="checkbox" name="echart" lay-skin="primary" value="5" title="基层企业工会排名前十统计">
            <input type="checkbox" name="echart" lay-skin="primary" value="6" title="近一年各月会员统计">
            <input type="checkbox" name="echart" lay-skin="primary" value="7" title="近一年入会人数前五统计">
            <!--<input type="checkbox" name="echart" lay-skin="primary" value="8" title="会员民族分布统计">-->
            <!--<input type="checkbox" name="echart" lay-skin="primary" value="9" title="会员年龄分布统计">-->
            <!--<input type="checkbox" name="echart" lay-skin="primary" value="10" title="会员学历分布统计">-->
            <input type="checkbox" name="echart" lay-skin="primary" value="11" title="农民工职工比例统计">
            <!--<input type="checkbox" name="echart" lay-skin="primary" value="12" title="会员户籍分布统计">-->
        </div>
    </div>
</div>
<div class="row" th:if="${roldetype == '1'}">
    <span class="title print" id="load1" style="margin-left:45px;margin-bottom: 10px">下载</span>
    <span class="title print" id="reset" style="margin-left:20px;margin-bottom: 10px">清空选择</span>
</div>
<js>
    <div th:include="fragment/fargment :: bootstrapTableJs"></div>
    <script th:src="@{/static/assets/js/chartist.min.js}"></script>
    <script th:src="@{/static/assets/js/bootstrap-notify.js}"></script>
    <script th:src="@{/static/assets/js/paper-dashboard.js}"></script>
    <script th:src="@{/static/plugin/echarts/echarts.min.js}"></script>
    <script th:src="@{/static/js/jquery.jqprint-0.3.js}"></script>
    <script th:src="@{/static/js/layui.all.js}"></script>
    <script type="text/javascript">
        //显示省总工会更多
        function showOrHide(){
            var div = $("#div1").get(0);
            if(div.style.display == "none"){
                div.style.display = "";
                App.loadingAjax({
                url: App.ctxPath + "blackboard/getStatistics",
                success: function (data) {
                    var result = data.data;
                    provincialUnionsMore(result.provincialUnionsMore);//省总更多
                }
            })
            }else{
                div.style.display = "none";
            }
        }


        $(document).ready(function () {
            getStatistics();

            layui.use(['form'],function(){
                var form =layui.form;
                form.render();
            });

            $("#reset").click(function () {
                $("input:checkbox[name='echart']:checked").attr("checked", false);
                layui.form.render("checkbox");
            })

            $("#load1").click(function () {

                //获取选中的值
                var arr = new Array();
                $("input:checkbox[name='echart']:checked").each(function () {
                        arr.push($(this).val());
                })

                if(arr.length == 0){
                    layer.msg("请选择需要下载的统计");
                    return;
                }

                $("#eType").val(arr.join(','));
                var type = $("#eType").val();
                $.ajax({
                    url:App.ctxPath + "/blackboard/downLoadExcel",
                    dataType:"json",
                    data:{type: type},
                    success: function (result) {
                        if(result.code == 200){
                            window.location.href = result.data;
                        }
                    }
                })
            })
        });


        /**
         * 获取统计数据
         */
        function getStatistics() {

            App.loadingAjax({
                url: App.ctxPath + "blackboard/getStatistics",
                success: function (data) {
                    var result = data.data;
                    memberStatistics(result.memberStatistics);
                    lastYearMonthStatistics(result.lastYearMonthStatistics);
                    memberTop10Statistics(result.memberTop10Statistics);
                    provincialUnionsTop10(result.provincialUnionsTop10);
                   // provincialUnionsMore(result.provincialUnionsMore);
                    grassrootsEnterprisesTop10(result.grassrootsEnterprisesTop10);
                    joinOrganizationTop5(result.joinOrganizationTop5);
                   // organizationalRank(result.organizationalRank);
                    memmberRank(result.memmberRank);
                }
            })


        }

        /**
         * 工会会员人数统计
         */
        function memberStatistics(data) {
            var memberStatistics = echarts.init(document.getElementById('memberStatistics'));
            var option = {
                title: {
                    text: '',
                    subtext: '',
                    x: 'center'
                },
                tooltip: {
                    trigger: 'item',
                    formatter: "{a} <br/>{b} : {c} ({d}%)"
                },
                legend: {
                    orient: 'vertical',
                    x: 'left',
                    data: ['会员男', '会员女']
                },
                toolbox: {
                    show: true,
                    feature: {
                        mark: {show: true},
                        dataView: {show: true, readOnly: false},
                        magicType: {
                            show: true,
                            type: ['pie', 'funnel']
                        },
                        restore: {show: true}
                    }
                },
                calculable: false,
                series: [
                    // {
                    //     name:'访问来源',
                    //     type:'pie',
                    //     selectedMode: 'single',
                    //     radius : [0, 40],
                    //     x: '20%',
                    //     width: '40%',
                    //     funnelAlign: 'right',
                    //     itemStyle : {
                    //         normal : {
                    //             label : {
                    //                 position : 'inner'
                    //             },
                    //             labelLine : {
                    //                 show : false
                    //             }
                    //         }
                    //     },
                    //     color:['#7DA8F8','rgb(57, 219, 185)'],
                    //     data:[
                    //         {value:25, name:'干部男',selected:true},
                    //         {value:10, name:'干部女'}
                    //
                    //     ]
                    // },
                    {
                        name: '访问来源',
                        type: 'pie',
                        radius: [55, 90],
                        x: '60%',
                        width: '35%',
                        funnelAlign: 'left',
                        color: ['#F3BC46', '#e4b9b9'],
                        data: [
                            {value: data.men, name: '会员男'},
                            {value: data.women, name: '会员女'}
                        ]
                    }
                ]
            };
            memberStatistics.setOption(option);
            $("#print1").click(function () {
                var img_box = $("#img_box");
                img_box.html('<img src="' + memberStatistics.getDataURL() + '">').css("display", "block");
                $("#memberStatistics").css("display", "none");

                //调整图片
                var img = img_box.find("img");
                var imgWidth = img.width();
                var showWidth = 1000; // 显示宽度，即图片缩小到的宽度
                if (imgWidth > showWidth) { // 只有当图片大了才缩小
                    var imgNewHeight = img.height() / (imgWidth / showWidth);
                    img.css({'width': showWidth + 'px', 'height': imgNewHeight + 'px'});
                }

                //打印
                $("#img_box").jqprint({});

                $("#memberStatistics").css("display", "block");
                $("#img_box").css("display", "none");
            });
        }


        /**
         * 近一年各月注册和入会人员统计
         */
        function lastYearMonthStatistics(data) {
            var lastYearMonthStatistics = echarts.init(document.getElementById('lastYearMonthStatistics'));
            var option = {
                title: {
                    text: '',
                    subtext: '累计注册人数' + data.registerCount + '人，入会人数' + data.memberCount + '人，已绑定会员'+data.bindUserCount+'人',
                    top:'12px'
                },
                tooltip: {
                    trigger: 'axis'
                },
                legend: {
                    data: ['注册人员', '入会会员','绑定会员']
                },
                toolbox: {
                    show: true,
                    feature: {
                        mark: {show: true},
                        dataView: {show: true, readOnly: false},
                        magicType: {show: true, type: ['line', 'bar', 'stack', 'tiled']},
                        restore: {show: true}
                    }
                },
                calculable: true,
                xAxis: [
                    {
                        type: 'category',
                        boundaryGap: false,
                        data: data.months
                    }
                ],
                yAxis: [
                    {
                        type: 'value',
                        axisLabel: {
                            formatter: '{value} 人'
                        }
                    }
                ],
                series: [
                    {
                        name: '注册人员',
                        type: 'line',
                        color: ['#ae81ff'],
                        data: data.register,
                        itemStyle: {normal: {areaStyle: {type: 'default'}}}
                    },
                    {
                        name: '入会会员',
                        type: 'line',
                        color: ['#8470FF'],
                        data: data.member,
                        itemStyle: {normal: {areaStyle: {type: 'default'}}}
                    },
                    {
                        name: '绑定会员',
                        type: 'line',
                        color: ['orange'],
                        data: data.bindUser,
                        itemStyle: {normal: {areaStyle: {type: 'default'}}}
                    }
                ]
            };
            lastYearMonthStatistics.setOption(option);
        }

        /**
         * 会员总量排名前十工会统计
         * @param data
         */
        function memberTop10Statistics(data) {
            var top10Statistics = echarts.init(document.getElementById('top10Statistics'));
            var values=data.organization;
            var option = {
                tooltip: {
                    trigger: 'axis'
                },
                legend: {
                    y:'-6',
                    data: ['会员总量', '男', '女']
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                toolbox: {
                    y:'-6',
                    show: true,
                    feature: {
                        mark: {show: true},
                        dataView: {show: true, readOnly: false},
                        magicType: {show: true, type: ['line', 'bar', 'stack', 'tiled']},
                        restore: {show: true}
                    }
                },
                calculable: true,
                xAxis: [
                    {
                        type: 'category',
                        data: data.organization,
                        axisLabel:{
						     interval:0,//横轴信息全部显示
						    // rotate: -30,//-30度角倾斜显示
						     formatter:function(values)
                                     {
                                         var ret = "";//拼接加\n返回的类目项
                                         var maxLength = 6;//每项显示文字个数
                                         var valLength = values.length;//X轴类目项的文字个数
                                         var rowN = Math.ceil(valLength / maxLength); //类目项需要换行的行数
                                         if (rowN > 1)//如果类目项的文字大于3,
                                         {
                                             for (var i = 0; i < rowN; i++) {
                                                 var temp = "";//每次截取的字符串
                                                 var start = i * maxLength;//开始截取的位置
                                                 var end = start + maxLength;//结束截取的位置
                                                 //这里也可以加一个是否是最后一行的判断，但是不加也没有影响，那就不加吧
                                                 temp = values.substring(start, end) + "\n";
                                                 ret += temp; //凭借最终的字符串
                                             }
                                             return ret;
                                         }
                                         else {
                                             return values;
                                         }
                                     },
                                     textStyle: {//x轴上的文字样式
                                        align: 'left'
                                   }
						}
                    }
                ],
                yAxis: [
                    {
                        type: 'value',
                        axisLabel: {
                            formatter: '{value} 人'
                        }
                    }
                ],
                series: [
                    {
                        name: '会员总量',
                        type: 'bar',
                        color: ['#87CEFF'],
                        data: data.count,
                        itemStyle: {//条形柱上显示数字
							normal: {
								label: {
									show: true, //开启显示
									position: 'top', //在上方显示
									textStyle: { //数值样式
										color: ['#ae81ff'],
										fontSize: 15
									}
								}
							}
						}
                    },
                    {
                        name: '男',
                        type: 'bar',
                        stack: '广告',
                        color: ['#90EE90'],
                        data: data.men
                    },
                    {
                        name: '女',
                        type: 'bar',
                        stack: '广告',
                        color: ['#e4b9b9'],
                        data: data.women
                    }
                ]
            };
            top10Statistics.setOption(option);
        }


        /**
         * 省总工会直属前十
         * @param data
         */
        function provincialUnionsTop10(data) {
            var provincialUnionsTop10 = echarts.init(document.getElementById('provincialUnionsTop10'));
            var values=data.organization;
             var option = {
                tooltip: {
                    trigger: 'axis'
                },
                legend: {
                    y:'-6',
                    data: ['会员总量']
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                toolbox: {
                    y:'-6',
                    show: true,
                    feature: {
                        mark: {show: true},
                        dataView: {show: true, readOnly: false},
                        magicType: {show: true, type: ['line', 'bar', 'stack', 'tiled']},
                        restore: {show: true}
                    }
                },
                calculable: true,
                xAxis: [
                    {
                        type: 'category',
                        data: data.organization,
                        axisLabel:{
						     interval:0,//横轴信息全部显示
						    // rotate: -30,//-30度角倾斜显示
						     formatter:function(values)
                                     {
                                         var ret = "";//拼接加\n返回的类目项
                                         var maxLength = 6;//每项显示文字个数
                                         var valLength = values.length;//X轴类目项的文字个数
                                         var rowN = Math.ceil(valLength / maxLength); //类目项需要换行的行数
                                         if (rowN > 1)//如果类目项的文字大于3,
                                         {
                                             for (var i = 0; i < rowN; i++) {
                                                 var temp = "";//每次截取的字符串
                                                 var start = i * maxLength;//开始截取的位置
                                                 var end = start + maxLength;//结束截取的位置
                                                 //这里也可以加一个是否是最后一行的判断，但是不加也没有影响，那就不加吧
                                                 temp = values.substring(start, end) + "\n";
                                                 ret += temp; //凭借最终的字符串
                                             }
                                             return ret;
                                         }
                                         else {
                                             return values;
                                         }
                                     },
                                     textStyle: {//x轴上的文字样式
                                        align: 'left'
                                   }
						}
                    }
                ],
                yAxis: [
                    {
                        type: 'value',
                        axisLabel: {
                            formatter: '{value} 人'
                        }
                    }
                ],
                series: [
                    {
                        name: '会员总量',
                        type: 'bar',
                        color: ['#87CEFF'],
                        data: data.count,
                        itemStyle: {//条形柱上显示数字
							normal: {
								label: {
									show: true, //开启显示
									position: 'top', //在上方显示
									textStyle: { //数值样式
										color: ['#ae81ff'],
										fontSize: 15
									}
								}
							}
						}
                    }
                ]
            };
            provincialUnionsTop10.setOption(option);
        }


        /**
         * 省总工会直属更多
         * @param data
         */
        function provincialUnionsMore(data) {
            var provincialUnionsMore = echarts.init(document.getElementById('provincialUnionsMore'));
            var values=data.organization;
            var option = {
                tooltip: {
                    trigger: 'axis'
                },
                legend: {
                    y:'-6',
                    data: ['会员总量']
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                toolbox: {
                    y:'-6',
                    show: true,
                    feature: {
                        mark: {show: true},
                        dataView: {show: true, readOnly: false},
                        magicType: {show: true, type: ['line', 'bar', 'stack', 'tiled']},
                        restore: {show: true}
                    }
                },
                calculable: true,
                xAxis: [
                    {
                        type: 'category',
                        data: data.organization,
                        axisLabel:{
						     interval:0,//横轴信息全部显示
						    // rotate: -30,//-30度角倾斜显示
						     formatter:function(values)
                                     {
                                         var ret = "";//拼接加\n返回的类目项
                                         var maxLength = 4;//每项显示文字个数
                                         var valLength = values.length;//X轴类目项的文字个数
                                         var rowN = Math.ceil(valLength / maxLength); //类目项需要换行的行数
                                         if (rowN > 1)//如果类目项的文字大于3,
                                         {
                                             for (var i = 0; i < rowN; i++) {
                                                 var temp = "";//每次截取的字符串
                                                 var start = i * maxLength;//开始截取的位置
                                                 var end = start + maxLength;//结束截取的位置
                                                 //这里也可以加一个是否是最后一行的判断，但是不加也没有影响，那就不加吧
                                                 temp = values.substring(start, end) + "\n";
                                                 ret += temp; //凭借最终的字符串
                                             }
                                             return ret;
                                         }
                                         else {
                                             return values;
                                         }
                                     },
                                     textStyle: {//x轴上的文字样式
                                        align: 'left'
                                   }
						}
                    }
                ],
                yAxis: [
                    {
                        type: 'value',
                        axisLabel: {
                            formatter: '{value} 人'
                        }
                    }
                ],
                series: [
                    {
                        name: '会员总量',
                        type: 'bar',
                        color: ['#87CEFF'],
                        data: data.count,
                        itemStyle: {//条形柱上显示数字
							normal: {
								label: {
									show: true, //开启显示
									position: 'top', //在上方显示
									textStyle: { //数值样式
										color: ['#ae81ff'],
										fontSize: 15
									}
								}
							}
						}
                    }
                ]
            };
            provincialUnionsMore.setOption(option);
        }





         /**
         * 基层企业工会排名前十工会统计
         * @param data
         */
        function grassrootsEnterprisesTop10(data) {
            var grassrootsEnterprisesTop10 = echarts.init(document.getElementById('grassrootsEnterprisesTop10'));
            var values=data.organization;
            var option = {
                tooltip: {
                    trigger: 'axis'
                },
                legend: {
                    y:'-6',
                    data: ['会员总量', '男', '女']
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                toolbox: {
                    y:'-6',
                    show: true,
                    feature: {
                        mark: {show: true},
                        dataView: {show: true, readOnly: false},
                        magicType: {show: true, type: ['line', 'bar', 'stack', 'tiled']},
                        restore: {show: true}
                    }
                },
                calculable: true,
                xAxis: [
                    {
                        type: 'category',
                        data: data.organization,
                        axisLabel:{
						     interval:0,//横轴信息全部显示
						    // rotate: -30,//-30度角倾斜显示
						     formatter:function(values)
                                     {
                                         var ret = "";//拼接加\n返回的类目项
                                         var maxLength = 6;//每项显示文字个数
                                         var valLength = values.length;//X轴类目项的文字个数
                                         var rowN = Math.ceil(valLength / maxLength); //类目项需要换行的行数
                                         if (rowN > 1)//如果类目项的文字大于3,
                                         {
                                             for (var i = 0; i < rowN; i++) {
                                                 var temp = "";//每次截取的字符串
                                                 var start = i * maxLength;//开始截取的位置
                                                 var end = start + maxLength;//结束截取的位置
                                                 //这里也可以加一个是否是最后一行的判断，但是不加也没有影响，那就不加吧
                                                 temp = values.substring(start, end) + "\n";
                                                 ret += temp; //凭借最终的字符串
                                             }
                                             return ret;
                                         }
                                         else {
                                             return values;
                                         }
                                     },
                                     textStyle: {//x轴上的文字样式
                                        align: 'left'
                                   }
						}
                    }
                ],
                yAxis: [
                    {
                        type: 'value',
                        axisLabel: {
                            formatter: '{value} 人'
                        }
                    }
                ],
                series: [
                    {
                        name: '会员总量',
                        type: 'bar',
                        color: ['#87CEFF'],
                        data: data.count,
                        itemStyle: {//条形柱上显示数字
							normal: {
								label: {
									show: true, //开启显示
									position: 'top', //在上方显示
									textStyle: { //数值样式
										color: ['#ae81ff'],
										fontSize: 15
									}
								}
							}
						}
                    },
                    {
                        name: '男',
                        type: 'bar',
                        stack: '广告',
                        color: ['#90EE90'],
                        data: data.men
                    },
                    {
                        name: '女',
                        type: 'bar',
                        stack: '广告',
                        color: ['#e4b9b9'],
                        data: data.women
                    }
                ]
            };
            grassrootsEnterprisesTop10.setOption(option);
        }

        /**
         * Banner初始化
         */
//        var demoSearch = {
//            id: "demoSearchTable",	//表格id
//            seItem: null,		//选中的条目
//            table: null,
//           // relationId: $('#relationId').val(),
//            layerIndex: -1
//        };

          /**
         * 初始化表格的列
         */
//        demoSearch.initColumn = function () {
//            return [
//                {field: 'selectItem', checkbox: true},
//                {title: '工会名称', field: 'organization', visible: true, align: 'center', valign: 'middle', sortable: false},
//                {title: '月份', field: 'month', visible: true, align: 'center', valign: 'middle', sortable: false},
//                {title: '数量', field: 'count', align: 'center', valign: 'middle'}
//            ]
//        };


        /**
         * 组织数列表
         */
//        $(function () {
//            var defaultColunms = demoSearch.initColumn();
//            var table = new BSTable(demoSearch.id, "/blackboard/getCountStatistics", defaultColunms);
//            table.setPaginationType("server");
//            demoSearch.table = table.init();
//        });



        /**
         * Banner初始化
         */
//        var demoSearch2 = {
//            id: "demoSearchTable2",	//表格id
//            seItem: null,		//选中的条目
//            table: null,
//           // relationId: $('#relationId').val(),
//            layerIndex: -1
//        };

          /**
         * 初始化表格的列
         */
//        demoSearch2.initColumn = function () {
//            return [
//                {field: 'selectItem', checkbox: true},
//                {title: '工会名称', field: 'organization', visible: true, align: 'center', valign: 'middle', sortable: false},
//                {title: '月份', field: 'month', visible: true, align: 'center', valign: 'middle', sortable: false},
//                {title: '数量', field: 'count', align: 'center', valign: 'middle'}
//            ]
//        };


        /**
         * 每月组织数排行列表
         */
//        $(function () {
//            var defaultColunms = demoSearch2.initColumn();
//            var table = new BSTable(demoSearch2.id, "/blackboard/getCountStatistics2", defaultColunms);
//            table.setPaginationType("server");
//            demoSearch2.table = table.init();
//        });

         /**
         * 组织数
         * @param data
         */
       // function organizationalRank(data) {

      //  }












        /**
         * 近一年各月会员统计
         */
        function memmberRank(data) {
            var memmberRank = echarts.init(document.getElementById('memmberRank'));
            var option = {
                title: {
                    text: '',
                   // subtext: '累计会员人数' + data.memberCount + '人'
                },
                tooltip: {
                    trigger: 'axis'
                },
                legend: {
                    data: ['新增会员人数']
                },
                toolbox: {
                    show: true,
                    feature: {
                        mark: {show: true},
                        dataView: {show: true, readOnly: false},
                        magicType: {show: true, type: ['line', 'bar', 'stack', 'tiled']},
                        restore: {show: true}
                    }
                },
                calculable: true,
                xAxis: [
                    {
                        type: 'category',
                        boundaryGap: false,
                        data: data.months
                    }
                ],
                yAxis: [
                    {
                        type: 'value',
                        axisLabel: {
                            formatter: '{value} 人'
                        }
                    }
                ],
                series: [
                    {
                        name: '新增会员人数',
                        type: 'line',
                        color: ['#ae81ff'],
                         data: data.memberCount,
                        itemStyle: {normal: {areaStyle: {type: 'default'}}}
                    }
                ]
            };
            memmberRank.setOption(option);
        }








        /**
         * 近一年入会人数排名前五工会统计
         * @param data
         */
        function joinOrganizationTop5(data) {
            var joinOrganizationTop5 = echarts.init(document.getElementById('joinOrganizationTop5'));
            var values=data.organization;
            var option = {
                title: {
                    text: '',
                    subtext: ''
                },
                tooltip: {
                    trigger: 'axis'
                },
                legend: {
                    y:'-7.5',
                    data: ['新增入会人数']
                },
                toolbox: {
                    y:'-7.5',
                    show: true,
                    feature: {
                        mark: {show: true},
                        dataView: {show: true, readOnly: false},
                        magicType: {show: true, type: ['line', 'bar']},
                        restore: {show: true}
                    }
                },
                calculable: true,
                xAxis: [
                    {
                        type: 'value',
                        boundaryGap: [0, 0.01]
                    }
                ],
                grid:{x:'22%',y:'5%',right:'15%',bottom:'9%',containLable:true},//修改样式
                yAxis: [
                    {
                        type: 'category',
                        data: data.organization,
                        axisLabel:{
						     interval:0,//横轴信息全部显示
						    // rotate: 30,//30度角倾斜显示
						   formatter:function(values)
                                     {
                                         var ret = "";//拼接加\n返回的类目项
                                         var maxLength = 19;//每项显示文字个数
                                         var valLength = values.length;//X轴类目项的文字个数
                                         var rowN = Math.ceil(valLength / maxLength); //类目项需要换行的行数
                                         if (rowN > 1)//如果类目项的文字大于3,
                                         {
                                             for (var i = 0; i < rowN; i++) {
                                                 var temp = "";//每次截取的字符串
                                                 var start = i * maxLength;//开始截取的位置
                                                 var end = start + maxLength;//结束截取的位置
                                                 //这里也可以加一个是否是最后一行的判断，但是不加也没有影响，那就不加吧
                                                 temp = values.substring(start, end) + "\n";
                                                 ret += temp; //凭借最终的字符串
                                             }
                                             return ret;
                                         }
                                         else {
                                             return values;
                                         }
                                     }
						}
                    }
                ],
                series: [
                    {
                        name: '新增入会人数',
                        type: 'bar',
                        color: ['#ae81ff'],
                        data: data.member,
                        itemStyle: {
							normal: {
								label: {
									show: true, //开启显示
									position: 'right', //在上方显示
									textStyle: { //数值样式
										color: ['#ae81ff'],
										fontSize: 15
									}
								}
							}
						}
                    }
                ]
            };
            joinOrganizationTop5.setOption(option);
        }


        /**
         * 异步统计民族分布
         */
        $.ajax({
            url:App.ctxPath+'/blackboard/getMemberInfoByNation',
            type:'post',
            dataType:'json',
            success:function(data){
                var tempList =[];
                var tempLegend=[];
                $(data.list).each(function(){
                    if(this.name!='其他'){
                        tempList.push(this);
                        tempLegend.push(this.name);
                    }
                });
                data.list= tempList;
                data.legend= tempLegend;

                var memberInfo1 = echarts.init(document.getElementById('memberInfo1'));
                var option = {
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: {
                            type: 'shadow'
                        }
                    },
                    legend: {
                        data: data.legend
                    },
                    grid: {
                        left: '3%',
                        right: '4%',
                        bottom: '3%',
                        containLabel: true
                    },
                    xAxis: {
                        type: 'value',
                        boundaryGap: [0, 0.01]
                    },

                    yAxis: {
                        type: 'category',
                        data: data.legend,
                        axisLabel: {
                            interval: 0,
                        },
                        inverse:true
                    },
                    series: [{
                        data: data.list,
                        type: 'bar',
                        itemStyle : { normal: {
                                label :
                                    {
                                        show: true,
                                        position: 'right', //在上方显示
                                        textStyle: { //数值样式
                                            color: ['#ae81ff'],
                                            fontSize: 15
                                        }

                                    },
                                color:'#ae81ff',  //圈圈的颜色
                                lineStyle:{
                                    color:'#ddd'  //线的颜色
                                }
                            }}
                    }]
                };

                memberInfo1.setOption(option);


            }


        });
        /**
         * 异步统计学历人数
         */

        // $.ajax({
        //     url:App.ctxPath+'/blackboard/getMemberInfoByEducation',
        //     type:'post',
        //     dataType:'json',
        //     data:{},
        //     success:function(data){
        //         var memberInfo3 = echarts.init(document.getElementById('memberInfo3'));
        //
        //
        //         var option = {
        //             // title : {
        //             //     text: '工会会员民族分布情况',
        //             //     x:'center'
        //             // },
        //             tooltip : {
        //                 trigger: 'item',
        //                 formatter: "{a} <br/>{b} : {c} ({d}%)"
        //             },
        //             legend: {
        //                 orient: 'vertical',
        //                 left: 'left',
        //                 data: data.legend
        //             },
        //             series : [
        //                 {
        //                     name: '人数',
        //                     type: 'pie',
        //                     radius : '80%',
        //                     center: ['50%', '60%'],
        //                     data:data.list,
        //                     itemStyle: {
        //                         emphasis: {
        //                             shadowBlur: 10,
        //                             shadowOffsetX: 0,
        //                             shadowColor: 'rgba(0, 0, 0, 0.5)'
        //                         },
        //                         normal: {label : {show: true}}
        //                     },
        //                     label:{
        //                         normal:{
        //                             formatter(v) {
        //                                 return v.name+"("+v.value+"人)";
        //                             }
        //                         }
        //                     }
        //                 }
        //             ]
        //         };
        //         memberInfo3.setOption(option);
        //     }
        // });
        /**
         * 异步统计农民工人数
         */

        $.ajax({
            url:App.ctxPath+'/blackboard/getMemberInfoByFarmer',
            type:'post',
            dataType:'json',
            data:{},
            success:function(data){
                var memberInfo5 = echarts.init(document.getElementById('memberInfo5'));


                var option = {
                    // title : {
                    //     text: '工会会员民族分布情况',
                    //     x:'center'
                    // },
                    tooltip : {
                        trigger: 'item',
                        formatter: "{a} <br/>{b} : {c} ({d}%)"
                    },
                    legend: {
                        orient: 'vertical',
                        left: 'left',
                        data: data.legend
                    },
                    series : [
                        {
                            name: '人数',
                            type: 'pie',
                            radius : '80%',
                            center: ['50%', '60%'],
                            data:data.list,
                            itemStyle: {
                                emphasis: {
                                    shadowBlur: 10,
                                    shadowOffsetX: 0,
                                    shadowColor: 'rgba(0, 0, 0, 0.5)'
                                },
                                normal: {label : {show: true}}
                            },
                            label:{
                                normal:{
                                    formatter(v) {
                                        return v.name+"("+v.value+"人)";
                                    }
                                }
                            }
                        }
                    ]
                };
                memberInfo5.setOption(option);
            }
        });


        /**
         * 异步统计年龄分布
         */
        // $.ajax({
        //     url:App.ctxPath+'/blackboard/getMemberInfoByAge',
        //     type:'post',
        //     // async:false,
        //     dataType:'json',
        //     success:function(data){
        //         var memberInfo2 = echarts.init(document.getElementById('memberInfo2'));
        //         var option = {
        //             xAxis: {
        //                 type: 'category',
        //                 data: data.legend
        //             },
        //             yAxis: {
        //                 type: 'value'
        //             },
        //             tooltip: {
        //                 trigger: 'axis',
        //                 axisPointer: {
        //                     type: 'shadow'
        //                 }
        //             },
        //             series: [{
        //                 data: data.list,
        //                 type: 'bar',
        //                 itemStyle : { normal: {
        //                             label : {
        //                                 show: true,
        //                                 position: 'top', //在上方显示
        //                         }}}
        //             }]
        //         };
        //         memberInfo2.setOption(option);
        //
        //
        //     }
        //
        //
        // });
        /**
         * 异步统计户籍分布
         */
        /**
        $.ajax({
            url:App.ctxPath+'/blackboard/getMemberInfoByDocile',
            type:'post',
            dataType:'json',
            success:function(data){
                var memberInfo4 = echarts.init(document.getElementById('memberInfo4'));
                var option = {
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: {
                            type: 'shadow'
                        }
                    },
                    legend: {
                        data: data.legend
                    },
                    grid: {
                        left: '3%',
                        right: '4%',
                        bottom: '3%',
                        containLabel: true
                    },
                    xAxis: {
                        type: 'value',
                        boundaryGap: [0, 0.01]
                    },

                    yAxis: {
                        type: 'category',
                        data: data.legend,
                        axisLabel: {
                            interval: 0,
                        },
                        inverse:true
                    },
                    series: [{
                        data: data.list,
                        type: 'bar',
                        itemStyle : { normal: {
                                label : {
                                    show: true,
                                    position: 'right', //在上方显示
                                    textStyle: { //数值样式
                                        color: ['#ae81ff'],
                                        fontSize: 15
                                    }

                                    },
                                color:'#ae81ff',  //圈圈的颜色
                                lineStyle:{
                                    color:'#ddd'  //线的颜色
                                }
                            }}
                    }]
                };

                memberInfo4.setOption(option);


            }


        });
         */

        $.ajax({

            url:App.ctxPath+'/blackboard/getNotFarmerByTimeRange',
            type:'post',
            data:{
                start:20190115,
                end:20190301
            },
            success:function(data){

                    $(data).each(function(){
                        $('#memberFarmerInfo tr:first').append('<td>'+dateFormat(this.createTime)+'</td>');
                        $('[t2]').append('<td>'+this.value+'</td>');
                    })
            }

        });
        $.ajax({

            url:App.ctxPath+'/blackboard/getFarmerByTimeRange',
            type:'post',
            data:{
                start:20190115,
                end:20190301
            },
            success:function(data){

                    $(data).each(function(){
                        $('#memberFarmerInfo tr:last').append('<td>'+this.value+'</td>');
                    })
            }

        });


        function dateFormat(dateStr){
            return dateStr.substr(4,2)+'月'+dateStr.substr(6,2)+'日';
        }


    </script>
    <script th:src="@{http://www.jq22.com/jquery/jquery-migrate-1.2.1.min.js}"></script>
</js>

</body>